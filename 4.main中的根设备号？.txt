要理解 ROOT_DEV = ORIG_ROOT_DEV; 的含义，需要结合Linux 0.11 内核的启动流程和设备号机制来拆解，以下是分层解析：

1. 核心概念：设备号（dev_t）
在早期 Linux 内核中，ROOT_DEV 和 ORIG_ROOT_DEV 都是表示设备号的全局变量（类型为 dev_t），设备号是内核识别硬件设备的核心标识：
设备号分为主设备号（major）和次设备号（minor）：
主设备号：区分设备类型（如硬盘、软盘、串口），对应内核的设备驱动程序；
次设备号：区分同一类型下的具体设备（如硬盘的第一个分区、第二个分区）。
例如：0x301 表示主设备号 3（IDE 硬盘）、次设备号 1（第一个主分区），即 /dev/hda1。

2. 变量的定义与来源
（1）ORIG_ROOT_DEV：启动时的 “原始根设备号”
ORIG_ROOT_DEV 不是代码中手动赋值的，而是内核启动时从引导加载程序（bootsect.s/setup.s）传递过来的参数：
引导程序（如 BIOS 或 LILO）会检测系统的启动介质（软盘、硬盘），并将对应的根设备号存入内存指定位置；
内核启动时（通过汇编代码）读取该值，赋值给 ORIG_ROOT_DEV，代表 “系统启动时指定的根文件系统所在设备”。
（2）ROOT_DEV：内核运行时的 “当前根设备号”
ROOT_DEV 是内核实际使用的根设备号，内核后续挂载根文件系统、访问根设备时，都会以这个变量的值为准。

3. ROOT_DEV = ORIG_ROOT_DEV; 的核心含义
这行代码的作用是：将内核启动时从引导程序获取的 “原始根设备号” 赋值给内核运行时使用的 “当前根设备号”，本质是 “初始化根设备号”，让内核知道「根文件系统挂载在哪个设备上」。

4. 补充背景（为什么需要这一步？）
Linux 0.11 是单根文件系统设计，内核启动后第一个要挂载的就是根文件系统，而挂载的前提是知道根文件系统所在的设备；
引导程序（setup.s）在启动内核前，会检测硬件（比如是否从软盘 / 硬盘启动），并将对应的设备号保存到 ORIG_ROOT_DEV；
内核初始化阶段（main 函数开头），通过这行代码把 “引导程序检测到的根设备号” 继承过来，为后续挂载根文件系统做准备。

5. 举例说明
如果系统从软盘（/dev/fd0）启动，引导程序会将 ORIG_ROOT_DEV 设置为软盘的设备号（如 0x0200），这行代码会把 ROOT_DEV 也设为 0x0200，内核后续就会从软盘挂载根文件系统；
如果系统从硬盘第一个分区（/dev/hda1）启动，ORIG_ROOT_DEV 是 0x0301，ROOT_DEV 也会被设为 0x0301，内核从硬盘第一个分区挂载根文件系统。
总结
ROOT_DEV = ORIG_ROOT_DEV; 是 Linux 0.11 内核初始化阶段的核心步骤，核心作用是继承引导程序传递的根设备号，初始化内核的根设备标识，让内核明确根文件系统的物理存储设备，为后续挂载根文件系统、启动用户空间做基础。